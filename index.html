<html>
<head>
<title>WebGL Fireworks</title>
<style>
html, body {
//	cursor: none;
}
</style>
</head>

<body>

<script type="text/javascript" src="js/lightgl.js"></script>

<script id="lineVert" type="text/shader/x-vertex">
void main() {
	gl_Position = gl_ModelViewProjectionMatrix * gl_Vertex;
}
</script>

<script id="lineFrag" type="text/shader/x-fragment">
void main() {
	gl_FragColor = vec4(1.0, 1.0, 1.0, 1.0);
}
</script>

<script id="planeVert" type="text/shader/x-vertex">
varying vec2 coord;
void main() {
	coord = gl_TexCoord.xy;
	gl_Position = gl_ModelViewProjectionMatrix * gl_Vertex;
}
</script>

<script id="planeFrag" type="text/shader/x-fragment">
uniform sampler2D texture;
uniform float tiling;
varying vec2 coord;
void main() {
	vec2 newCoord;
	newCoord.x = mod(coord.x*tiling, 1.0);
	if (coord.x == 1.0) newCoord.x = 1.0;
	newCoord.y = mod(coord.y*tiling, 1.0);
	if (coord.y == 1.0) newCoord.y = 1.0;
	gl_FragColor = vec4(texture2D(texture, newCoord).xyz, 0.75);
}
</script>
	
<script id="pointVert" type="text/shader/x-vertex">
varying vec4 color;
void main() {
	gl_Position = gl_ModelViewProjectionMatrix * gl_Vertex;
	gl_PointSize = 1.5;
	color = gl_Color;
	color = vec4(color.xyz, 1.0);
}
</script>

<script id="pointFrag" type="text/shader/x-fragment">
varying vec4 color;
void main() {
	gl_FragColor = color;
}
</script>

<script id="terrainVert" type="text/shader/x-vertex">
varying vec3 color;
varying vec3 normal;
varying vec3 light;

void main() {
	const vec3 lightDir = vec3(1.0, 2.0, 3.0) / 3.741657386773941;
	light = (gl_ModelViewMatrix * vec4(lightDir, 0.0)).xyz;
	color = vec3(0.0, 0.8, 0.0);
	normal = gl_NormalMatrix * gl_Normal;
	gl_Position = gl_ModelViewProjectionMatrix * gl_Vertex;
}
</script>

<script id="terrainFrag" type="text/shader/x-fragment">
varying vec3 color;
varying vec3 normal;
varying vec3 light;

void main() {
	vec3 n = normalize(normal);
	float diffuse = max(0.0, dot(light, n));
	float specular = 0.0; //pow(max(0.0, -reflect(light, n).z), 32.0) * sqrt(diffuse);
	gl_FragColor = vec4(mix(color * (0.3 + 0.7 * diffuse), vec3(1.0), specular), 1.0);
}
</script>


<script type="text/javascript" src="js/terrain.js"></script>	
<script type="text/javascript" src="js/js.js"></script>



</body>

</html>